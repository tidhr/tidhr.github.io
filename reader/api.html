<h1 id="about-the-rest-api">About the REST API</h1>
<p>Our <a href="https://reader.tidhr.com">reader.tidhr.com</a> has also a REST API with 
support for external 3rd party apps. This document describes the API.</p>
<p>The base URL for our REST service is 
<a href="reader.tidhr.com/rest"><a href="https://reader.tidhr.com/rest">https://reader.tidhr.com/rest</a></a>. You can use HTTPS or 
HTTP.</p>
<p>Our frontend has been built by using this API.</p>
<hr>
<h2 id="1-access-tokens">1. Access Tokens</h2>
<p>Users can create their own access tokens after log in at 
<a href="https://reader.tidhr.com/authorizations"><a href="https://reader.tidhr.com/authorizations">https://reader.tidhr.com/authorizations</a></a>. </p>
<p><strong><em>Please note:</em></strong> You must save the content in the provided <code>token</code> and 
<code>secret</code> properties or otherwise that access token is useless. You cannot get 
the value of <code>secret</code> if you don&#39;t save it!</p>
<hr>
<h2 id="2-resources">2. Resources</h2>
<p>Our API resources are usually JSON objects.</p>
<p>These objects may contain partial child objects from other online resources if 
the child object has <code>$ref</code> property which points to an another online 
resource. Exception is if the object itself has <code>$ref</code> as the first level 
property -- then it is the link to the resource itself.</p>
<hr>
<h2 id="3-get-all-available-resources-from-the-rest-api">3. Get all available resources from the REST API</h2>
<ul>
<li><code>GET /rest</code></li>
</ul>
<p>Sample output:</p>
<pre><code class="lang-json">{
   &quot;profile&quot; : {
      &quot;$ref&quot; : &quot;http://reader.tidhr.com/rest/profile&quot;
   },
   &quot;feeds&quot; : {
      &quot;$ref&quot; : &quot;http://reader.tidhr.com/rest/feeds&quot;
   },
   &quot;access_token&quot; : {
      &quot;profile&quot; : true,
      &quot;part_feed&quot; : false,
      &quot;edit_profile&quot; : true,
      &quot;import_feed&quot; : true,
      &quot;description&quot; : &quot;Bot&quot;,
      &quot;bots&quot; : true,
      &quot;users_id&quot; : null,
      &quot;read_feed&quot; : true,
      &quot;edit_pages&quot; : true,
      &quot;join_feed&quot; : true,
      &quot;debug&quot; : true,
      &quot;token&quot; : &quot;6ef1b3b68a60aa2749e5f1b1c1dbef40&quot;,
      &quot;pages&quot; : true
   },
   &quot;auth&quot; : {
      &quot;$ref&quot; : &quot;http://reader.tidhr.com/auth&quot;
   },
   &quot;authorizations&quot; : {
      &quot;$ref&quot; : &quot;http://reader.tidhr.com/rest/authorizations&quot;
   },
   &quot;register&quot; : {
      &quot;$ref&quot; : &quot;http://reader.tidhr.com/rest/register&quot;
   },
   &quot;bots&quot; : {
      &quot;$ref&quot; : &quot;http://reader.tidhr.com/rest/bots&quot;
   },
   &quot;debug&quot; : {
      &quot;$ref&quot; : &quot;http://reader.tidhr.com/rest/debug&quot;
   },
   &quot;pages&quot; : {
      &quot;$ref&quot; : &quot;http://reader.tidhr.com/rest/pages&quot;
   }
}</code></pre>
<p>Possible optional properties for this resource are <code>feeds</code>, <code>debug</code>, <code>bots</code>, 
<code>profile</code>, <code>authorizations</code>, <code>access_token</code>, <code>register</code>, <code>pages</code>, and <code>auth</code>.</p>
<p>These properties are included only if your access token or authorized session 
has correct priviledges. Some resources are public.</p>
<hr>
<h3 id="3-1-pages">3.1. Pages</h3>
<hr>
<h4 id="3-1-1-listing-pages">3.1.1. Listing pages</h4>
<ul>
<li><code>GET /rest/pages</code></li>
</ul>
<p>Get a list of page objects.</p>
<p>Sample output:</p>
<pre><code class="lang-json">[
   {
      &quot;title&quot; : &quot;About&quot;,
      &quot;$ref&quot; : &quot;http://reader.tidhr.com/rest/pages/about&quot;
   },
   {
      &quot;title&quot; : &quot;API&quot;,
      &quot;$ref&quot; : &quot;http://reader.tidhr.com/rest/pages/api&quot;
   }
]</code></pre>
<hr>
<h5 id="3-1-1-1-get-page-resource">3.1.1.1. Get page resource</h5>
<ul>
<li><code>GET /rest/pages/:name</code></li>
</ul>
<pre><code class="lang-json">{
   &quot;content_type&quot; : &quot;text/x-markdown&quot;,
   &quot;content&quot; : &quot;About the reader\n======\n\nThis is our NKO entry -- a RSS/Atom reader.&quot;,
   &quot;name&quot; : &quot;about&quot;,
   &quot;title&quot; : &quot;About&quot;,
   &quot;$ref&quot; : &quot;http://reader.tidhr.com/rest/pages/about&quot;
}</code></pre>
<hr>
<h5 id="3-1-1-2-updates-the-page-content">3.1.1.2. Updates the page content</h5>
<ul>
<li><code>POST /rest/pages/:name</code></li>
<li>Requires <code>edit_pages</code> priviledge.</li>
</ul>
<p>Example input body (with Content-Type header as <code>application/json</code>):</p>
<pre><code class="lang-json">{
   &quot;content_type&quot; : &quot;text/x-markdown&quot;,
   &quot;content&quot; : &quot;About the reader\n======\n\nThis is our NKO entry -- a RSS/Atom reader.&quot;,
   &quot;name&quot; : &quot;about&quot;,
   &quot;title&quot; : &quot;About&quot;,
}</code></pre>
<hr>
<h5 id="3-1-1-3-delete-the-page-resource">3.1.1.3. Delete the page resource</h5>
<ul>
<li>DELETE /rest/pages/:name</li>
<li>Requires <code>edit_pages</code> priviledge.</li>
</ul>
<hr>
<h3 id="3-1-2-creating-a-new-page">3.1.2. Creating a new page</h3>
<ul>
<li><code>POST /rest/pages</code></li>
<li>Requires <code>edit_pages</code> priviledge.</li>
</ul>
<p>Example input body (with <code>application/json</code> content type):</p>
<pre><code class="lang-json">{
   &quot;content_type&quot; : &quot;text/x-markdown&quot;,
   &quot;content&quot; : &quot;About the reader\n======\n\nThis is our NKO entry -- a RSS/Atom reader.&quot;,
   &quot;name&quot; : &quot;about&quot;,
   &quot;title&quot; : &quot;About&quot;,
}</code></pre>
<p>Pages use <a href="http://daringfireball.net/projects/markdown/syntax">Markdown syntax</a> 
by default. (Actual library we are using is 
<a href="https://github.com/chjj/marked">marked</a>.)</p>
<hr>
<h3 id="3-2-authorizations-and-access-tokens">3.2. Authorizations and Access Tokens</h3>
<hr>
<h4 id="3-2-1-get-list-of-access-tokens">3.2.1. Get list of access tokens</h4>
<ul>
<li><code>GET /rest/authorizations</code></li>
<li>Requires <code>profile</code> priviledge.</li>
</ul>
<p>Example output:</p>
<pre><code class="lang-json">[
   {
      &quot;description&quot; : &quot;Test&quot;,
      &quot;token&quot; : &quot;f78678efd12d9d9f3d4bc3f91eca3222&quot;,
      &quot;$ref&quot; : &quot;https://reader.tidhr.com/rest/authorizations/f78678efd12d9d9f3d4bc3f91eca3222&quot;
   },
   {
      &quot;description&quot; : &quot;Test 2&quot;,
      &quot;token&quot; : &quot;2c3a42b8373e872b66d636dc8ed50eb3&quot;,
      &quot;$ref&quot; : &quot;https://reader.tidhr.com/rest/authorizations/2c3a42b8373e872b66d636dc8ed50eb3&quot;
   },
   {
      &quot;description&quot; : &quot;Test3&quot;,
      &quot;token&quot; : &quot;66dc251d61d46f4d567784757726f0ca&quot;,
      &quot;$ref&quot; : &quot;https://reader.tidhr.com/rest/authorizations/66dc251d61d46f4d567784757726f0ca&quot;
   }
]</code></pre>
<hr>
<h5 id="3-2-1-1-get-access-token-resource">3.2.1.1. Get access token resource</h5>
<ul>
<li><code>GET /rest/authorizations/:access_token</code></li>
<li>Requires <code>profile</code> priviledge.</li>
</ul>
<p>Example response:</p>
<pre><code class="lang-json">{
   &quot;profile&quot; : false,
   &quot;part_feed&quot; : false,
   &quot;edit_profile&quot; : false,
   &quot;import_feed&quot; : false,
   &quot;description&quot; : &quot;Test&quot;,
   &quot;bots&quot; : false,
   &quot;users_id&quot; : 13,
   &quot;read_feed&quot; : true,
   &quot;edit_pages&quot; : false,
   &quot;join_feed&quot; : true,
   &quot;debug&quot; : false,
   &quot;token&quot; : &quot;f78678efd12d9d9f3d4bc3f91eca3222&quot;,
   &quot;pages&quot; : false
}</code></pre>
<hr>
<h5 id="3-2-1-2-delete-access-token">3.2.1.2. Delete access token</h5>
<ul>
<li><code>DELETE /rest/authorizations/:access_token</code></li>
<li>Requires <code>profile</code> priviledge.</li>
</ul>
<hr>
<h4 id="3-2-2-create-a-new-access-token">3.2.2. Create a new access token</h4>
<ul>
<li><code>POST /rest/authorizations</code></li>
</ul>
<p>JSON example request body:</p>
<pre><code class="lang-json">{
   &quot;description&quot;: &quot;&quot;,
   &quot;join_feed&quot;: &quot;true&quot;,
   &quot;read_feed&quot;: &quot;true&quot;,
   &quot;part_feed&quot;: &quot;true&quot;,
   &quot;profile&quot;: &quot;true&quot;,
   &quot;edit_profile&quot;: &quot;false&quot;,
}</code></pre>
<p>These properties are all optional and will be the same default values as in the 
example.</p>
<p><strong><em>Note:</em></strong> Because of a bug in our code you cannot change <code>edit_profile</code>, and 
we cannot fix our app code during <a href="http://nodeknockout.com">the Node Knockout 
competition</a>.</p>
<ul>
<li>Requires <code>profile</code> priviledge.</li>
</ul>
<p>You will get this object as response:</p>
<pre><code class="lang-json">{
   &quot;profile&quot; : true,
   &quot;part_feed&quot; : true,
   &quot;secret&quot; : &quot;gtI0nWrpISr8S2Ma46xMSEP65Xc9irSQ&quot;,
   &quot;edit_profile&quot; : false,
   &quot;import_feed&quot; : false,
   &quot;$ref&quot; : &quot;http://reader.tidhr.com/rest/authorizations/554a3adb75c62be589b4620820a40d26&quot;,
   &quot;description&quot; : &quot;&quot;,
   &quot;bots&quot; : false,
   &quot;users_id&quot; : 123,
   &quot;read_feed&quot; : true,
   &quot;edit_pages&quot; : false,
   &quot;join_feed&quot; : true,
   &quot;debug&quot; : false,
   &quot;token&quot; : &quot;554a3adb75c62be589b4620820a40d26&quot;,
   &quot;pages&quot; : false
}</code></pre>
<hr>
<h3 id="3-3-returns-debug-information-from-the-service-">3.3. Returns debug information from the service.</h3>
<ul>
<li><code>GET /rest/debug</code></li>
<li>Requires <code>debug</code> priviledge.</li>
</ul>
<p>You will get this object as response:</p>
<pre><code class="lang-json">{
   &quot;uid&quot; : 1000,
   &quot;groups&quot; : [
      1000
   ],
   &quot;gid&quot; : 1000
}</code></pre>
<hr>
<h3 id="3-4-user-profile">3.4. User Profile</h3>
<hr>
<h3 id="3-4-1-get-current-profile-information">3.4.1. Get current profile information</h3>
<ul>
<li><code>GET /rest/profile</code></li>
<li>Requires <code>profile</code> priviledge.</li>
</ul>
<p>You will get this object as response:</p>
<pre><code class="lang-json">{
   &quot;profile&quot; : {
      &quot;provider&quot; : &quot;github&quot;,
      &quot;emails&quot; : [
         {
            &quot;value&quot; : &quot;jheusala@example.com&quot;
         }
      ],
      &quot;id&quot; : 123456,
      &quot;profileUrl&quot; : &quot;https://github.com/jheusala&quot;,
      &quot;username&quot; : &quot;jheusala&quot;,
      &quot;displayName&quot; : &quot;Jaakko-Heikki Heusala&quot;
   },
   &quot;id&quot; : 123,
   &quot;username&quot; : &quot;jhh&quot;
}</code></pre>
<hr>
<h3 id="3-4-2-update-user-profile">3.4.2. Update user profile</h3>
<ul>
<li><code>POST /rest/profile</code></li>
</ul>
<p>Example input body:</p>
<pre><code class="lang-json">{
   &quot;username&quot;: &quot;jhh&quot;,
   &quot;password&quot;: &quot;abcdefgh12345&quot;
}</code></pre>
<ul>
<li>Property <code>username</code> is optional. Username can only be changed if current 
profile does not have a username.</li>
<li>Property `password is optional. If provided, users&#39; password will be changed.</li>
<li>Requires <code>edit_profile</code> priviledge.</li>
</ul>
<hr>
<h3 id="3-5-registration">3.5. Registration</h3>
<hr>
<h3 id="3-5-1-registration">3.5.1. Registration</h3>
<ul>
<li><code>POST /rest/register</code></li>
</ul>
<p>Example request body:</p>
<pre><code class="lang-json">{
   &quot;username&quot;: &quot;john&quot;,
   &quot;password&quot;: &quot;1234567&quot;
}</code></pre>
<ul>
<li>Properties <code>username</code> and <code>password</code> are required and cannot be empty.</li>
</ul>
<hr>
<h4 id="3-5-2-registration-with-get-">3.5.2. Registration (with GET)</h4>
<ul>
<li><code>GET /rest/register</code></li>
</ul>
<p>This resource actually does nothing and is only provided as a customary manner.</p>
<p>You will get this object as response:</p>
<pre><code class="lang-json">{}</code></pre>
<hr>
<h3 id="3-6-bots">3.6. Bots</h3>
<hr>
<h4 id="3-6-1-get-list-of-active-bots">3.6.1. Get list of active bots</h4>
<ul>
<li><code>GET /rest/bots</code></li>
<li>Requires <code>bots</code> priviledge.</li>
</ul>
<p>You will get this object as response:</p>
<pre><code class="lang-json">```


******************************************************************************


#### 3.6.2. When a bot wants to register on the server and gets an ID

* `POST /rest/bots`
* Requires `bots` priviledge.

You will get this object as response:

```json</code></pre>
<hr>
<h3 id="3-6-3-">3.6.3.</h3>
<ul>
<li><code>DELETE /rest/bots/:bot_id</code></li>
<li>Requires <code>bots</code> priviledge.</li>
</ul>
<p>You will get this object as response:</p>
<pre><code class="lang-json">```

******************************************************************************


### 3.17. GET /rest/bots/:bot_id

* Requires `bots` priviledge.

You will get this object as response:

```json</code></pre>
<hr>
<h3 id="3-18-get-rest-bots-bot_id-feeds">3.18. GET /rest/bots/:bot_id/feeds</h3>
<p>You will get this object as response:</p>
<pre><code class="lang-json">```

* Requires `bots` priviledge.

******************************************************************************


### 3.19. POST /rest/feeds

You will get this object as response:

```json</code></pre>
<ul>
<li>Requires <code>join_feed</code> priviledge.</li>
</ul>
<hr>
<h3 id="3-20-delete-rest-feeds-feed_id">3.20. DELETE /rest/feeds/:feed_id</h3>
<p>You will get this object as response:</p>
<pre><code class="lang-json">```

* Requires `part_feed` priviledge.

******************************************************************************


### 3.21. GET /rest/feeds

You will get this object as response:

```json</code></pre>
<ul>
<li>Requires <code>read_feed</code> priviledge.</li>
</ul>
<hr>
<h3 id="3-22-get-rest-feeds-feed_id">3.22. GET /rest/feeds/:feed_id</h3>
<p>You will get this object as response:</p>
<pre><code class="lang-json">```

* Requires `read_feed` priviledge.

******************************************************************************


### 3.23. GET /rest/feeds/:feed_id/items

You will get this object as response:

```json</code></pre>
<ul>
<li>Requires <code>read_feed</code> priviledge.</li>
</ul>
<hr>
<h3 id="3-24-post-rest-feeds-feed_id">3.24. POST /rest/feeds/:feed_id</h3>
<p>You will get this object as response:</p>
<pre><code class="lang-json">```

* Requires `import_feed` priviledge.

******************************************************************************


### 3.25. POST /rest/feeds/:feed_id/items

You will get this object as response:

```json</code></pre>
<ul>
<li>Requires <code>import_feed</code> priviledge.</li>
</ul>
<hr>
<h3 id="3-26-get-rest-feeds-feed_id-items-feed_item_id">3.26. GET /rest/feeds/:feed_id/items/:feed_item_id</h3>
<p>You will get this object as response:</p>
<pre><code class="lang-json">```

* Requires `read_feed` priviledge.

******************************************************************************


4. GET /auth
------------

Some passport related APIs are located at [https://reader.tidhr.com/auth/](reader.tidhr.com/auth/).

You will get this object as response:

```json
{
   &quot;facebook&quot; : {
      &quot;$ref&quot; : &quot;https://reader.tidhr.com/auth/facebook&quot;
   },
   &quot;github&quot; : {
      &quot;$ref&quot; : &quot;https://reader.tidhr.com/auth/github&quot;
   },
   &quot;local&quot; : {
      &quot;$ref&quot; : &quot;https://reader.tidhr.com/auth/local&quot;                                                                                                                             
   }                                                                                                                                                                             
}</code></pre>
<hr>
<h2 id="a-appendix">A. Appendix</h2>
<hr>
<h3 id="a1-how-to-use-curl">A1. How to use CURL</h3>
<p>Save settings to <code>.netrc</code> and use <code>curl -n [-X method] URL</code>.</p>
<hr>
